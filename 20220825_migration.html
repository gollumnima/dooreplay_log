<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><title>토목공사</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="토공의 블로그입니다. 개발계의 토끼공주가 되는게 목표입니다"/><meta property="og:url" content="https://www.dooreplay.com"/><meta property="og:type" content="article"/><meta property="og:site_name" content="토공로그"/><meta property="og:title" content="토목공사"/><meta property="og:description" content="토공의 블로그입니다. 개발계의 토끼공주가 되는게 목표입니다"/><meta property="og:image" content="https://www.dooreplay.com[object Object]"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="sudokeepcoding"/><link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-chrome-192x192.png"/><link rel="icon" type="image/png" sizes="512x512" href="/favicon/android-chrome-512x512.png"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&amp;family=Nanum+Myeongjo&amp;display=swap" rel="stylesheet"/><link rel="preload" href="/_next/static/css/9dc77a8ce839e9dd.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9dc77a8ce839e9dd.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-fd1bc4a65a80e5c8.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-c3fa5adce5f50cc6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9647c36122c47d87.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-9b227ca272e1c815.js" defer=""></script><script src="/_next/static/C39dDb8I9-9je5yB6hh46/_buildManifest.js" defer=""></script><script src="/_next/static/C39dDb8I9-9je5yB6hh46/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="layout_layout_container___QBxn"><div class="layout_layout_box__T1z1L"><nav class="menubar_menubar_container__0KqIu"><div class="menubar_menubar_box__lzqx8"><ul class="menubar_menubar_left__ev8fn"><li class="menubar_clickable__Tx33M">폴더 아이콘</li><li>돋보기</li><li>깃헙</li></ul></div></nav><div class="layout_content_wrapper__52nj5"><div><h1 class="font-bold text-7xl mt-24 mb-12"></h1><time class="text-gray-500 italic"></time><p class="prose mt-12"><div class="lg"><h2>마이그레이션 과정 회고해보기</h2><br/><h3>시작은 시큼하게..</h3><p>입사하고 어드민 만드는 과정에 참여하고 싶었으나, 앱 배포의 우선순위가 컸기에 앱 작업을 시작하게 되었다.
TypeScript를 사용하는 프로젝트지만, type이 제대로 적용되고 있지 않았고, eslint도 제대로 적용되고 있지 않았고, 라이브러리도 devDependency와 dependency가 뒤죽박죽..!
당장은 고치는 게 힘들지만 더 늦는 것보다 낫겠다 싶어서 몇 천, 몇 만줄의 코드를 갈아 엎었다. 😭
로그인할 때 비밀번호를 가리지 않은 게 조금 충격이었는데 그냥 누군가 퇴사하고, 인수인계 받고 하느라 정신 없었겠지 하는 마음으로 하나씩 메꿔가보았다.</p><br/><h3>그놈의 Firebase..</h3><p>보통 Firebase는 백앤드 일손이 부족할 때 쓴다고 알고 있었는데, 우리 회사에 백앤드 3명이나 있는데 대체 왜..?라는 의문을 가졌다.
관련해서 리더에게 물어봐도 이미 얘기가 협의를 통해 파베를 쓰기로 했다고 한다.
그치만 백앤드에서 파베 sdk를 쓰는 게 안전할 것 같은데 프론트에서 로그인 관리를 한다는게 좀 이해가 가지 않았다.
백앤드 팀원의 얘기를 들어보니 백앤드도 파베를 쓰는 걸 좋아하지 않았고 네 번정도 관련해서 리더와 얘기를 했지만 결과는 같았다.
하.지.만. 소셜 로그인 기능을 넣던 중 카카오로그인은 Firebase에서 제공하지 않기에 카카오만 custom token을 이용해야 했고..
함수를 쪼개 쪼개서 호출하다 보니 카카오로 로그인하기까지 대략 아홉 번의 함수 호출이 일어났고, UX적으로 굉장히 안 좋았다. 느리단 말이다.
그래서 다시 개발자들끼리 머리를 맞대고 PM님을 꼬셔서 앱 배포 일정을 조금 늦추기로 협의를 보고, 리더를 설득해 Firebase를 코드에서 걷어내는데 성공했다.</p><br/><h3>구서버에서 신서버로의 이동</h3><p>그냥 피그마 보고 개발만 하다가 전혀 생각지도 못했던 문제점에 봉착했다. 기존 앱 유저의 약 절반정도가 핸드폰 인증을 하지 않았으며, 약 4000명 정도가 이메일 형식이 아닌 아이디였다.(리뉴얼 앱은 이메일 형식 아이디를 씀)
그래서 급하게 마이그레이션 페이지를 기획하게 되고, 이 과정에서 PM님들과 CTO님과의 의견 차이가 좁혀지지 않아서 말단 후론트앤드로서 확정되지 않은 디자인을 보며 퍼블리싱만 하며 지루하게 기다릴 수밖에 없었다.
약 2주 정도 지나고 결론이 났다. 기존에는 커머스 기능을 사용할 때에만 핸드폰 인증을 하기로 했는데, 이제는 회원가입시 무조건 핸드폰 인증부터 하기로..!
그래서 구서버에서 유저가 로그인을 시도하면 핸드폰 인증 과정부터 시작해서 마이그레이션 과정이 진행되고, 중간에 이메일형식이 아닌 유저에게 단 한 번, 이메일형식의 계정으로 바꿀 기회를 주는 페이지도 넣었다.
사실 마이그레이션 과정보다 더 헷갈리는 것이 비밀번호 찾기 과정이었는데..
신서버에서 가입한 유저이거나 구서버 유저인데 핸드폰 인증을 받은 사람이면 비번 찾기할 때 핸드폰 인증 페이지로, 구서버 유저인데 핸드폰 인증을 받지 않은 사람이면서 아이디가 이메일 형식인 사람은 이메일을 통해 비밀번호를 변경할 수 있게끔, 그 어디에도 속하지 않는 사람은 어쩔 수 없이 CS팀에서 처리할 수 있도록 협의했다.</p><p>아 중간에 기획에서 소셜로그인 기능이 있다가 빠져버렸는데..! Facebook과 Google이 웹앱에서의 소셜로그인 기능을 막아둔 것을 뒤늦게 알아차려버렸다. 근데 그거 말고도 권한을 가지고 있는 리더가 미국에 있기 때문에 간단하게 클릭 한번이면 될 설정들을 몇 날 며칠씩 걸려서 했던것도 좀 속이 터졌다 ㅠㅠ
이래서 로그인은 앱단에서 처리하는 게 맞는 것 같다는 생각이 들었고~.~</p><br/><h3>내부 테스트</h3><p>내부 테스트를 거치니 생각보다 자잘한 UI 이슈들이 많았고, CSS를 능숙하게 하지 못해서 힘겨웠다. 디바이스별로, os버전에 따라 대응하는 것은 정말 너무 너무 힘든 일이었다. 그래도 플러터 개발자님이 CSS를 잘해서 많은 도움을 받을 수 있었다.
특히나 습관적으로 피그마에 있는 아이콘을 default값인 1x로 받은 것들을 싹 다 3x르 교체하고... 또 뭘 고쳤더라~.~ 많은 UI 버그들을 고치며 후론트앤드 개발자로서 좀 부끄웠던 것 같다.</p><br/><h3>결전의 날!</h3><p>전날 백앤드에서 서버 옮기는 작업을 진행하는데 내가 프론트 대표로(?) 긴급대응을 위해 있었지만 거의 내가 하는 일은 구경밖에 없었고 백앤드 팀원과 PM님을 마음속으로 열렬히 응원했다.
그리고 다음날 00시에 앱개발자님이 리뉴얼 된 앱을 스토어에 올렸고, 그 날은 괜시리 불안해서 잠을 제대로 못 자고 악몽을 꿨다. 그리고 아침... 많은 이슈들이 팡팡 터졌다.
리뉴얼 하고 로그인이 안 되서 별점테러를 하는 고객님도 계셨고, 잘 작동하는 기능인데 뭔가 잘 안 되셔서 화면 녹화를 해서 CS팀에게 전달하기도 했고..
제일 억울한 것은 버튼이 클릭되지 않는 이슈였다. UI적으로 예쁘지 않다는 이유로 버튼 클릭시 생기는 highlight를 빼서 사용자에게는 버튼이 클릭되지 않는 것처럼 보이는 것이었다. 사실은 API 호출에서 pending 걸려서 안되는 것처럼 보이는 것이었는데 ㅠㅠ 후론트는 억울하다~~
어쨌든 결전의 날에 서버 관련된 이슈가 많이 생겨서 백앤드 팀이 엄청 고생을 했고, CS팀도 많이 힘들었을 것 같다.
원시그널을 통해 로그를 보니 첫날 오후까지 약 500여 명의 계정이 신서버로 옮겨왔고, 우리 앱의 실사용 유저가 생각보다 많다는 생각이 들었다. 부담쓰.. 제가 잘할게요 고객님들...
앞으로 어드민 페이지 작업과 함께 앱 개선작업들을 해나갈 것 같은데 더이상의 이슈가 생기지 않았으면 좋겠고..ㅠㅠ</p></div></p></div></div></div><footer class="footer p-4 bg-base-300 text-base-content"><div><p><span class="text-emerald-400">ready</span>- started server on 0.0.0.0:3000, url: https://www.dooreplay.com/</p><p><span class="text-fuchsia-500">event</span>- compiled client and server successfully in 347 ms (135 modules)</p><p><span class="text-cyan-300">wait</span>- compiling / (client and server)...</p><p><span class="text-fuchsia-500">event</span>- compiled client and server successfully in 172 ms (168 modules)</p><p><span class="text-cyan-300">wait</span>- compiling...</p><p><span class="text-cyan-300">wait</span>- compiling...</p><p>Run ©2022 dooreplay.com</p><p class="text-cyan-50">Doori + play &amp;&amp; Do + replay!</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"title":"마이그레이션 과정 회고","date":"August 25, 2022","description":"입사하고 리뉴얼 앱을 만드는 과정에서 느낀 점들을 기록해보기","thumbnail":""},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, {})\n  })) : _createMdxContent();\n  function _createMdxContent() {\n    const _components = Object.assign({\n      h2: \"h2\",\n      h3: \"h3\",\n      p: \"p\"\n    }, _provideComponents(), props.components);\n    return _jsxs(\"div\", {\n      className: \"lg\",\n      children: [_jsx(_components.h2, {\n        children: \"마이그레이션 과정 회고해보기\"\n      }), _jsx(\"br\", {}), _jsx(_components.h3, {\n        children: \"시작은 시큼하게..\"\n      }), _jsx(_components.p, {\n        children: \"입사하고 어드민 만드는 과정에 참여하고 싶었으나, 앱 배포의 우선순위가 컸기에 앱 작업을 시작하게 되었다.\\nTypeScript를 사용하는 프로젝트지만, type이 제대로 적용되고 있지 않았고, eslint도 제대로 적용되고 있지 않았고, 라이브러리도 devDependency와 dependency가 뒤죽박죽..!\\n당장은 고치는 게 힘들지만 더 늦는 것보다 낫겠다 싶어서 몇 천, 몇 만줄의 코드를 갈아 엎었다. 😭\\n로그인할 때 비밀번호를 가리지 않은 게 조금 충격이었는데 그냥 누군가 퇴사하고, 인수인계 받고 하느라 정신 없었겠지 하는 마음으로 하나씩 메꿔가보았다.\"\n      }), _jsx(\"br\", {}), _jsx(_components.h3, {\n        children: \"그놈의 Firebase..\"\n      }), _jsx(_components.p, {\n        children: \"보통 Firebase는 백앤드 일손이 부족할 때 쓴다고 알고 있었는데, 우리 회사에 백앤드 3명이나 있는데 대체 왜..?라는 의문을 가졌다.\\n관련해서 리더에게 물어봐도 이미 얘기가 협의를 통해 파베를 쓰기로 했다고 한다.\\n그치만 백앤드에서 파베 sdk를 쓰는 게 안전할 것 같은데 프론트에서 로그인 관리를 한다는게 좀 이해가 가지 않았다.\\n백앤드 팀원의 얘기를 들어보니 백앤드도 파베를 쓰는 걸 좋아하지 않았고 네 번정도 관련해서 리더와 얘기를 했지만 결과는 같았다.\\n하.지.만. 소셜 로그인 기능을 넣던 중 카카오로그인은 Firebase에서 제공하지 않기에 카카오만 custom token을 이용해야 했고..\\n함수를 쪼개 쪼개서 호출하다 보니 카카오로 로그인하기까지 대략 아홉 번의 함수 호출이 일어났고, UX적으로 굉장히 안 좋았다. 느리단 말이다.\\n그래서 다시 개발자들끼리 머리를 맞대고 PM님을 꼬셔서 앱 배포 일정을 조금 늦추기로 협의를 보고, 리더를 설득해 Firebase를 코드에서 걷어내는데 성공했다.\"\n      }), _jsx(\"br\", {}), _jsx(_components.h3, {\n        children: \"구서버에서 신서버로의 이동\"\n      }), _jsx(_components.p, {\n        children: \"그냥 피그마 보고 개발만 하다가 전혀 생각지도 못했던 문제점에 봉착했다. 기존 앱 유저의 약 절반정도가 핸드폰 인증을 하지 않았으며, 약 4000명 정도가 이메일 형식이 아닌 아이디였다.(리뉴얼 앱은 이메일 형식 아이디를 씀)\\n그래서 급하게 마이그레이션 페이지를 기획하게 되고, 이 과정에서 PM님들과 CTO님과의 의견 차이가 좁혀지지 않아서 말단 후론트앤드로서 확정되지 않은 디자인을 보며 퍼블리싱만 하며 지루하게 기다릴 수밖에 없었다.\\n약 2주 정도 지나고 결론이 났다. 기존에는 커머스 기능을 사용할 때에만 핸드폰 인증을 하기로 했는데, 이제는 회원가입시 무조건 핸드폰 인증부터 하기로..!\\n그래서 구서버에서 유저가 로그인을 시도하면 핸드폰 인증 과정부터 시작해서 마이그레이션 과정이 진행되고, 중간에 이메일형식이 아닌 유저에게 단 한 번, 이메일형식의 계정으로 바꿀 기회를 주는 페이지도 넣었다.\\n사실 마이그레이션 과정보다 더 헷갈리는 것이 비밀번호 찾기 과정이었는데..\\n신서버에서 가입한 유저이거나 구서버 유저인데 핸드폰 인증을 받은 사람이면 비번 찾기할 때 핸드폰 인증 페이지로, 구서버 유저인데 핸드폰 인증을 받지 않은 사람이면서 아이디가 이메일 형식인 사람은 이메일을 통해 비밀번호를 변경할 수 있게끔, 그 어디에도 속하지 않는 사람은 어쩔 수 없이 CS팀에서 처리할 수 있도록 협의했다.\"\n      }), _jsx(_components.p, {\n        children: \"아 중간에 기획에서 소셜로그인 기능이 있다가 빠져버렸는데..! Facebook과 Google이 웹앱에서의 소셜로그인 기능을 막아둔 것을 뒤늦게 알아차려버렸다. 근데 그거 말고도 권한을 가지고 있는 리더가 미국에 있기 때문에 간단하게 클릭 한번이면 될 설정들을 몇 날 며칠씩 걸려서 했던것도 좀 속이 터졌다 ㅠㅠ\\n이래서 로그인은 앱단에서 처리하는 게 맞는 것 같다는 생각이 들었고~.~\"\n      }), _jsx(\"br\", {}), _jsx(_components.h3, {\n        children: \"내부 테스트\"\n      }), _jsx(_components.p, {\n        children: \"내부 테스트를 거치니 생각보다 자잘한 UI 이슈들이 많았고, CSS를 능숙하게 하지 못해서 힘겨웠다. 디바이스별로, os버전에 따라 대응하는 것은 정말 너무 너무 힘든 일이었다. 그래도 플러터 개발자님이 CSS를 잘해서 많은 도움을 받을 수 있었다.\\n특히나 습관적으로 피그마에 있는 아이콘을 default값인 1x로 받은 것들을 싹 다 3x르 교체하고... 또 뭘 고쳤더라~.~ 많은 UI 버그들을 고치며 후론트앤드 개발자로서 좀 부끄웠던 것 같다.\"\n      }), _jsx(\"br\", {}), _jsx(_components.h3, {\n        children: \"결전의 날!\"\n      }), _jsx(_components.p, {\n        children: \"전날 백앤드에서 서버 옮기는 작업을 진행하는데 내가 프론트 대표로(?) 긴급대응을 위해 있었지만 거의 내가 하는 일은 구경밖에 없었고 백앤드 팀원과 PM님을 마음속으로 열렬히 응원했다.\\n그리고 다음날 00시에 앱개발자님이 리뉴얼 된 앱을 스토어에 올렸고, 그 날은 괜시리 불안해서 잠을 제대로 못 자고 악몽을 꿨다. 그리고 아침... 많은 이슈들이 팡팡 터졌다.\\n리뉴얼 하고 로그인이 안 되서 별점테러를 하는 고객님도 계셨고, 잘 작동하는 기능인데 뭔가 잘 안 되셔서 화면 녹화를 해서 CS팀에게 전달하기도 했고..\\n제일 억울한 것은 버튼이 클릭되지 않는 이슈였다. UI적으로 예쁘지 않다는 이유로 버튼 클릭시 생기는 highlight를 빼서 사용자에게는 버튼이 클릭되지 않는 것처럼 보이는 것이었다. 사실은 API 호출에서 pending 걸려서 안되는 것처럼 보이는 것이었는데 ㅠㅠ 후론트는 억울하다~~\\n어쨌든 결전의 날에 서버 관련된 이슈가 많이 생겨서 백앤드 팀이 엄청 고생을 했고, CS팀도 많이 힘들었을 것 같다.\\n원시그널을 통해 로그를 보니 첫날 오후까지 약 500여 명의 계정이 신서버로 옮겨왔고, 우리 앱의 실사용 유저가 생각보다 많다는 생각이 들었다. 부담쓰.. 제가 잘할게요 고객님들...\\n앞으로 어드민 페이지 작업과 함께 앱 개선작업들을 해나갈 것 같은데 더이상의 이슈가 생기지 않았으면 좋겠고..ㅠㅠ\"\n      })]\n    });\n  }\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"20220825_migration"},"buildId":"C39dDb8I9-9je5yB6hh46","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>